# US-002: DNI Authentication for Content Service

| Status | DONEZ |

## Description
As a user of the CBTC Media Day application I want to receive the greeting message if and only if I send the proper DNI authentication header so that access to the service is restricted.

## Acceptance Criteria

```
Scenario: User receives greeting with valid DNI credentials
  Given the content service is deployed
  And a user "ValidUser" with DNI "12345678A" exists in the database
  When I send a GET request to the content endpoint with DNI Auth "12345678A:ValidUser"
  Then the response status code should be 200
```

```
Scenario: User denied access with invalid DNI credentials
  Given the content service is deployed
  When I send a GET request to the content endpoint with DNI Auth "99999999Z:InvalidUser"
  Then the response status code should be 403
```

```
Scenario: User denied access without credentials
  Given the content service is deployed
  When I send a GET request to the content endpoint without authentication header
  Then the response status code should be 403
```

## Related functional tests
- [tests/functional/us_002_test.py](../../tests/functional/us_002_test.py)

## Notes
- Authentication uses DNI:Name format (e.g., "12345678A:ValidUser")
- The DNI must be in the user's `dnis` list in the DynamoDB users table
- API Gateway returns 403 Forbidden when authorization fails (not 401 Unauthorized)
